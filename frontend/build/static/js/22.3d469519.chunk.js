(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[22],{89:function(e,t,a){"use strict";var n=a(72),o=a(78),r=a(80),c=a(79),i=a(0),s=a.n(i),u=a(4),m=a(106),l=a(131),p=["dashboard","adddocument","editdocument","documents","cms","flipbook","photobooth"],h=["signup","signin","verify","reset","forgetpass"];t.a=function(e){var t=function(t){Object(r.a)(i,t);var a=Object(c.a)(i);function i(){return Object(n.a)(this,i),a.apply(this,arguments)}return Object(o.a)(i,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("authUser"));!e&&p.includes(window.location.pathname.split("/")[1])&&this.props.history.push(m.p),e&&h.includes(window.location.pathname.split("/")[1])&&this.props.history.push(m.d),e&&"/"===window.location.pathname&&this.props.history.push(m.d)}},{key:"render",value:function(){return s.a.createElement(e,this.props)}}]),i}(s.a.Component);return Object(l.a)(u.g)(t)}},903:function(e,t,a){e.exports={root:"TakePhoto_root__2DO5a",photobooth_container:"TakePhoto_photobooth_container__3cWNG",frame:"TakePhoto_frame__2lGAh",countdown:"TakePhoto_countdown__2Wx2v",button_div:"TakePhoto_button_div__2AAfB","webcom-container":"TakePhoto_webcom-container__3jGYO"}},905:function(e,t,a){e.exports={save:"SubmitPhoto_save__2O4LC",background:"SubmitPhoto_background__3c1iC",photo_frame_container:"SubmitPhoto_photo_frame_container__GNiiO",captureFrame:"SubmitPhoto_captureFrame__2Ra8K",rotate:"SubmitPhoto_rotate__3Uwjs",image1:"SubmitPhoto_image1__2aDIv",image2:"SubmitPhoto_image2__BNkjV",image3:"SubmitPhoto_image3__3rGqs",image4:"SubmitPhoto_image4__28dPG"}},922:function(e,t,a){"use strict";a.r(t);var n,o,r,c=a(28),i=a(72),s=a(78),u=a(80),m=a(79),l=a(0),p=a.n(l),h=a(25),f=a(902),d=a.n(f),b=a(89),_=a(903),g=a.n(_),v=a(19),S=a(904),w=a.n(S),E=a(905),k=a.n(E),N=a(4),O=a(906),j=a.n(O),C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){r=document.querySelector("#captureFrame"),w()(r,{width:600,height:450}).then((function(e){var t=e.toDataURL("image/jpg");console.log(t),n.setState({finalImg:t}),n.props.submitPhoto(t,n.props.user)}))},n.changeFilter=function(e){switch(console.log(e.target.name),e.target.name){case"none":n.setState({filterName:[]});break;case"invert":n.setState({filterName:[-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,1,0,0,0,1,0]});break;case"grayscale":n.setState({filterName:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0]});break;case"sepia":n.setState({filterName:[.3,.45,.1,0,0,.2,.45,.1,0,0,.1,.3,.1,0,0,0,0,0,1,0]});break;default:n.setState({filterName:[]})}},n.state={finalImg:"",filterName:[]},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.finalImg,r=t.filterName;return n=this.props.frames.flatMap((function(e){return e.map((function(e){return e}))})),console.log(n),o=this.props.photos.map((function(e){return e})),p.a.createElement(p.a.Fragment,null,a?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:k.a.photo_frame_container},p.a.createElement("div",{className:k.a.captureFrame,id:"captureFrame"},p.a.createElement("div",{className:"captureImg"},p.a.createElement(j.a,{image:a,filter:r}))),p.a.createElement("div",{className:k.a.save,id:"save"},p.a.createElement("button",{onClick:this.changeFilter,name:"none"},"None"),p.a.createElement("button",{onClick:this.changeFilter,name:"invert"},"Invert"),p.a.createElement("button",{onClick:this.changeFilter,name:"grayscale"},"Grayscale"),p.a.createElement("button",{onClick:this.changeFilter,name:"sepia"},"Sepia")))):p.a.createElement("div",{className:k.a.photo_frame_container},p.a.createElement("div",{className:k.a.captureFrame,id:"captureFrame"},p.a.createElement("div",{className:"captureImg"},p.a.createElement("div",{className:k.a.image1,id:"captureImg"},p.a.createElement("img",{id:"image1",className:k.a.rotate,alt:"image1",src:o[0]}),p.a.createElement("img",{id:"frame1",alt:"frame1",src:n[0]}))),p.a.createElement("div",{className:k.a.save,id:"save"},p.a.createElement("button",{className:"btn waves-effect waves-light black",type:"submit",name:"action",onClick:function(t){return e.handleSubmit(t)}},"Done")))))}}]),a}(p.a.Component);var y=Object(N.g)(Object(h.b)((function(e){return console.log(e.photoReducer),{photos:e.photoReducer.photos,frames:e.photoReducer.frames}}),(function(e){return{submitPhoto:function(t,a){var n;e((n=t,function(e){e({type:v.a,payload:n})}))},resetPhoto:function(){return e((function(e){e({type:v.c})}))}}}))(C)),P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setRef=function(e){n.webcam=e},n.renderCountdown=function(){return p.a.createElement("div",null,p.a.createElement("span",{className:g.a.countdown,id:"countdown"},n.state.countdown))},n.setFrame=function(){var e=n.props.frame.slice(n.state.frameCount-1,n.state.frameCount),t=n.state.file;n.setState({currentStatus:3,photo:[].concat(Object(c.a)(n.state.photo),[{frame:e[0],image:n.state.file}])}),n.props.photoCaptured(t,e)},n.capture=function(){n.timer=setInterval((function(){1===n.state.countdown&&new Promise((function(e,t){n.setState({file:n.webcam.getScreenshot()}),e()})),n.state.countdown>1?n.setState({countdown:n.state.countdown-1}):(clearInterval(n.timer),n.setState({currentStatus:2}))}),1e3),n.setState({currentStatus:1,countdown:3})},n.renderResetState=function(){n.setState({currentStatus:0,countdown:3,frameCount:n.state.frameCount+1})},n.renderMain=function(){switch(n.state.currentStatus){case 1:return n.renderCountdown();case 2:return n.setFrame();case 3:return n.renderResetState();default:return null}},n.renderFrames=function(){var e=n.props.frame.slice(n.state.frameCount-1,n.state.frameCount);return p.a.createElement("img",{className:g.a.frame,id:"frame",alt:"images",src:e[0]})},n.webcam=p.a.createRef(),n.state={countdown:3,file:void 0,currentStatus:0,frameCount:1,photo:[]},n}return Object(s.a)(a,[{key:"render",value:function(){return p.a.createElement(p.a.Fragment,null,this.props.number>0?p.a.createElement("div",{className:g.a.photobooth_container},p.a.createElement("div",{id:"booth-container"},this.renderMain(),p.a.createElement("div",null,this.renderFrames(),p.a.createElement("div",{className:"webcam-container"},p.a.createElement(d.a,{style:{position:"absolute",margin:"auto",top:0,right:0,bottom:0,left:0,zIndex:-10,height:425},ref:this.setRef,audio:!1})))),p.a.createElement("div",{className:g.a.button_div,id:"button-div"},p.a.createElement("button",{onClick:this.capture,name:"photo-button"}))):p.a.createElement(y,null))}}]),a}(l.Component);t.default=Object(b.a)(Object(h.b)((function(e){return console.log("state from photo take container",e),{number:e.photoReducer.number_of_remain,frame:e.frameReducer.selected_frame}}),(function(e){return console.log("mapDispatchToProps"),{photoCaptured:function(t,a){var n,o;e((n=t,o=a,{type:v.b,photo:n,frames:o}))}}}))(P))}}]);
//# sourceMappingURL=22.3d469519.chunk.js.map
{"version":3,"sources":["hoc/withAuthentication.js","pages/TakePhoto/TakePhoto.module.scss","pages/SubmitPhoto/SubmitPhoto.module.scss","pages/SubmitPhoto/SubmitPhoto.js","store/actions/photos/photos.action.js","pages/TakePhoto/TakePhoto.js"],"names":["authroute","nonauthroute","withAuthentication","Component","WithAuthentication","auth","JSON","parse","localStorage","getItem","includes","window","location","pathname","split","this","props","history","push","ROUTES","React","compose","withRouter","module","exports","frame","imageData","images","SubmitRender","handleSubmit","e","document","querySelector","html2canvas","width","height","then","canvas","dataImage","toDataURL","console","log","setState","finalImg","submitPhoto","user","changeFilter","target","name","filterName","state","frames","flatMap","f","map","photos","p","className","classes","photo_frame_container","captureFrame","id","image","filter","save","onClick","image1","rotate","alt","src","type","connect","photoReducer","dispatch","photo","userId","lastPhoto","actionTypes","payload","resetPhoto","PhotoTake","setRef","webcam","renderCountdown","countdown","setFrame","slice","frameCount","file","currentStatus","photoCaptured","capture","timer","setInterval","Promise","resolve","reject","getScreenshot","clearInterval","renderResetState","renderMain","renderFrames","createRef","undefined","number","photobooth_container","style","position","margin","top","right","bottom","left","zIndex","ref","audio","button_div","withAuth","number_of_remain","frameReducer","selected_frame","imageSrc","frameSrc"],"mappings":"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","file":"static/js/22.3d469519.chunk.js","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport * as ROUTES from '../routes/routesConstant'; \nimport {compose} from 'recompose';\n\nconst authroute = [\n     'dashboard',\n     'adddocument',\n     'editdocument',\n     'documents',\n     'cms',\n     'flipbook',\n     'photobooth'\n]\n\nconst nonauthroute = [\n    'signup',\n    'signin',\n    'verify',\n    'reset',\n    'forgetpass'\n]\n\nconst withAuthentication = Component => {\n    class WithAuthentication extends React.Component{\n\n        componentDidMount(){\n            let auth = JSON.parse(localStorage.getItem(\"authUser\"));\n            if(!auth && authroute.includes(window.location.pathname.split('/')[1])){\n                this.props.history.push(ROUTES.SIGN_IN);\n            }\n            if(auth && nonauthroute.includes(window.location.pathname.split('/')[1])){\n                this.props.history.push(ROUTES.DASHBOARD);\n            }\n            if(auth && window.location.pathname === \"/\"){\n                this.props.history.push(ROUTES.DASHBOARD);\n            }\n        }\n        render() {\n            return <Component {...this.props}/>;\n        } \n    }\n\n    return compose(\n        withRouter\n    )(WithAuthentication);\n}\n\nexport default withAuthentication;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"TakePhoto_root__2DO5a\",\"photobooth_container\":\"TakePhoto_photobooth_container__3cWNG\",\"frame\":\"TakePhoto_frame__2lGAh\",\"countdown\":\"TakePhoto_countdown__2Wx2v\",\"button_div\":\"TakePhoto_button_div__2AAfB\",\"webcom-container\":\"TakePhoto_webcom-container__3jGYO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"save\":\"SubmitPhoto_save__2O4LC\",\"background\":\"SubmitPhoto_background__3c1iC\",\"photo_frame_container\":\"SubmitPhoto_photo_frame_container__GNiiO\",\"captureFrame\":\"SubmitPhoto_captureFrame__2Ra8K\",\"rotate\":\"SubmitPhoto_rotate__3Uwjs\",\"image1\":\"SubmitPhoto_image1__2aDIv\",\"image2\":\"SubmitPhoto_image2__BNkjV\",\"image3\":\"SubmitPhoto_image3__3rGqs\",\"image4\":\"SubmitPhoto_image4__28dPG\"};","import React from 'react'\nimport {connect} from 'react-redux';\nimport html2canvas from 'html2canvas';\nimport classes from './SubmitPhoto.module.scss';\nimport { submitPhotoAction, resetPhotoAction } from '../../store/actions/photos/photos.action';\nimport { withRouter } from 'react-router-dom'\nimport ImageFilter from 'react-image-filter';\n// import Axios from 'axios';\n\nlet frame;\nlet imageData;\n// eslint-disable-next-line no-unused-vars\n// let newRender;\nlet images;\nclass SubmitRender extends React.Component {\n\t\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfinalImg: '',\n\t\t\tfilterName: []\n\t\t}\n\t}\n\n\thandleSubmit = (e) => {\t\n\t// newRender = document.querySelector(\".captured\");\n\timages = document.querySelector('#captureFrame')\n\t\n\thtml2canvas(images, {\n\t\t\twidth: 600,\n\t\t\theight: 450\n\t\t}).then((canvas) => {\n\t\t\tvar dataImage = canvas.toDataURL('image/jpg')\n\t\t\tconsole.log(dataImage);\n\t\t\tthis.setState({\n\t\t\t\tfinalImg: dataImage\n\t\t\t})\n\t\t\tthis.props.submitPhoto(dataImage, this.props.user)\n\t\t\t//post to backend with axios, since its async render here\n\t\t\t\t// Axios({\n\t\t\t\t// \tmethod: 'POST',\n\t\t\t\t// \tbaseURL: `${process.env.REACT_APP_API_ENDPOINT}/api/v1/users/${this.props.user}/photos`,\n\t\t\t\t// \tdata: {\n\t\t\t\t// \t\t\tphoto: {\n\n\t\t\t\t// \t\t\tphoto: dataImage,\n\t\t\t\t// \t\t\tlike: 0,\n\t\t\t\t// \t\t\tuser_id: this.props.user\n\t\t\t\t\t\t\n\t\t\t\t// \t\t}\n\t\t\t\n\t\t\t\t// \t},\n\t\t\t\t// })\n\t\t\t\t// \t.then(data => this.props.history.push('/homepage'))\n\t\t\n\t})\n\t// this.setState({redirect: true})\n\n\t\t// this.props.resetPhoto()\n\t\t// this.props.history.push('/homepage')\n\t}\n\t\n\n\tchangeFilter = (e) => {\n\t\tconsole.log(e.target.name);\n\t\tswitch (e.target.name) {\n\t\t\tcase \"none\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tfilterName: []\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"invert\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tfilterName: [\n\t\t\t\t\t\t-1.00, 0.00, 0.00, 0.00, 1.00,\n\t\t\t\t\t\t0.00, -1.00, 0.00, 0.00, 1.00,\n\t\t\t\t\t\t0.00, 0.00, -1.00, 0.00, 1.00,\n\t\t\t\t\t\t0.00, 0.00, 0.00, 1.00, 0.00,\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"grayscale\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tfilterName: [\n\t\t\t\t\t\t1.00, 0.00, 0.00, 0.00, 0.00,\n\t\t\t\t\t\t1.00, 0.00, 0.00, 0.00, 0.00,\n\t\t\t\t\t\t1.00, 0.00, 0.00, 0.00, 0.00,\n\t\t\t\t\t\t0.00, 0.00, 0.00, 1.00, 0.00,\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"sepia\":\n\t\t\t\tthis.setState({\n\t\t\t\t\tfilterName: [\n\t\t\t\t\t\t0.30, 0.45, 0.10, 0.00, 0.00,\n\t\t\t\t\t\t0.20, 0.45, 0.10, 0.00, 0.00,\n\t\t\t\t\t\t0.10, 0.30, 0.10, 0.00, 0.00,\n\t\t\t\t\t\t0.00, 0.00, 0.00, 1.00, 0.00,\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.setState({\n\t\t\t\t\tfilterName: []\n\t\t\t\t});\n\t\t}\n\t}\n\n\n\trender() {\n\t\t\tconst { finalImg, filterName } = this.state;\n\n\t\t\tframe = this.props.frames.flatMap((f) => {  \n\t\t\t\t// debugger\n\t\t\t\treturn (\n\t\t\t\t\tf.map((f) => {\n\t\t\t\t\t\treturn f\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t})\n\t\t\tconsole.log(frame);\n\t\t\n\t\t\timageData = this.props.photos.map((p)=> {\n\t\t\t\treturn (p)\n\t\t\t})\n\t\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{finalImg ?\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<div className={classes.photo_frame_container}>\n\t\t\t\t\t\t\t\t<div className={classes.captureFrame} id=\"captureFrame\">\n\t\t\t\t\t\t\t\t\t<div className=\"captureImg\">\n\t\t\t\t\t\t\t\t\t\t<ImageFilter\n\t\t\t\t\t\t\t\t\t\t\timage={finalImg}\n\t\t\t\t\t\t\t\t\t\t\tfilter={filterName}\n\t\t\t\t\t\t\t\t\t\t\t// filter={ 'duotone' } // see docs beneath\n\t\t\t\t\t\t\t\t\t\t\t// colorOne={ clr_one }\n\t\t\t\t\t\t\t\t\t\t\t// colorTwo={ clr_two }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.save} id=\"save\">\n\t\t\t\t\t\t\t\t\t<button onClick={this.changeFilter} name=\"none\">None</button>\n\t\t\t\t\t\t\t\t\t<button onClick={this.changeFilter} name=\"invert\">Invert</button>\n\t\t\t\t\t\t\t\t\t<button onClick={this.changeFilter} name=\"grayscale\">Grayscale</button>\n\t\t\t\t\t\t\t\t\t<button onClick={this.changeFilter} name=\"sepia\">Sepia</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<div className={classes.photo_frame_container}>\n\t\t\t\t\t\t\t<div className={classes.captureFrame} id=\"captureFrame\" >\n\t\t\t\t\t\t\t\t<div className=\"captureImg\">\n\t\t\t\t\t\t\t\t\t<div className={classes.image1} id=\"captureImg\">\n\t\t\t\t\t\t\t\t\t\t<img id=\"image1\" className={classes.rotate} alt=\"image1\" src={imageData[0]}/>\n\t\t\t\t\t\t\t\t\t\t<img id=\"frame1\" alt=\"frame1\" src={frame[0]} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={classes.save} id=\"save\">\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclassName=\"btn waves-effect waves-light black\" \n\t\t\t\t\t\t\t\t\t\ttype=\"submit\" name=\"action\" \n\t\t\t\t\t\t\t\t\t\tonClick={(e)=>this.handleSubmit(e)}\n\t\t\t\t\t\t\t\t\t>Done</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t{/* <div id=\"background\">\n\t\t\t\t</div> */}\n\t\t\t</>\n\t\t\t  )\n\t\t}\n};\n\n\n\n\nfunction mapStateToProps(state) {\n\tconsole.log(state.photoReducer);\n\t\n\treturn {\n\t\tphotos: state.photoReducer.photos,\n\t\tframes: state.photoReducer.frames,\n\t\t// user: state.userReducer.user.id\n\t\t\n\t}\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tsubmitPhoto: (photo, userId) => { dispatch(submitPhotoAction(photo, userId)) },\n\t\tresetPhoto: () => dispatch(resetPhotoAction()),\n\t}\n}\nexport default (withRouter(connect(mapStateToProps, mapDispatchToProps)(SubmitRender)));","import * as actionTypes from './photos.actiontype'\n// import Axios from 'axios';\n\nexport const photoCapturedAction = (photo, frame) => {\n  return { type: actionTypes.PHOTO_CAPTURED, photo: photo, frames: frame}\n}\n\nexport const resetPhotoAction = () => {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.RESET_PHOTOS })\n  }\n}\n\nexport const submitPhotoAction = (lastPhoto) => {\n    return (dispatch )=> {\n        dispatch({ type: actionTypes.PHOTO_ALL_CAPTURED, payload: lastPhoto })\n    }\n  }\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Webcam from 'react-webcam';\nimport withAuth from '../../hoc/withAuthentication';\nimport classes from './TakePhoto.module.scss';\nimport Frame from '../../components/Frame';\n// import PhotoRender from './PhotoRender';\nimport { photoCapturedAction, resetPhotoAction } from '../../store/actions/photos/photos.action';\nimport SubmitRender from '../SubmitPhoto/SubmitPhoto';\n\nclass PhotoTake extends Component {\n  constructor(props) {\n    super(props)\n    this.webcam = React.createRef();\n\n    this.state = {\n      countdown: 3,\n      file: undefined,\n      currentStatus: 0,\n      frameCount: 1,\n      photo: [],\n    }\n  }\n\n  setRef = (webcam) => {\n    //from Webcam react-webcam\n    this.webcam = webcam;\n  }\n\n  renderCountdown = () => {\n    return (\n      <div>\n        <span className={classes.countdown} id=\"countdown\">{this.state.countdown}</span>\n      </div>\n    )\n  }\n\n  setFrame = () => {\n    const frame = this.props.frame.slice(this.state.frameCount - 1, this.state.frameCount)    \n    const file = this.state.file\n    this.setState({ currentStatus: 3, photo: [...this.state.photo, { frame: frame[0], image: this.state.file }] })\n    this.props.photoCaptured(file, frame)\n  }\n\n  capture = () => {\n    this.timer = setInterval(() => {\n      if (this.state.countdown === 1) {\n        new Promise((resolve, reject) => {\n          this.setState({ file: this.webcam.getScreenshot() });\n          resolve();\n        });\n      } if (this.state.countdown > 1) {\n        this.setState({ countdown: this.state.countdown - 1 });\n      } else {\n        clearInterval(this.timer);\n        this.setState({currentStatus: 2})\n      }\n    }, 1000);\n    this.setState({ currentStatus: 1, countdown: 3});\n  }\n\n  renderResetState = () => {\n    this.setState({ currentStatus: 0, countdown: 3, frameCount: this.state.frameCount + 1 })\n  }\n\n  renderMain = () => {\n    switch (this.state.currentStatus) {\n      case 1:\n       return this.renderCountdown();\n      case 2:\n        return this.setFrame();\n      case 3:\n        return this.renderResetState();\n      default: \n        return null\n    }\n  }\n\n  renderFrames = () => {\n    const frame = this.props.frame.slice(this.state.frameCount - 1, this.state.frameCount)\n    return (<img\n            className={classes.frame}\n            id=\"frame\"\n            alt=\"images\"\n            src={frame[0]}\n            // src={minion4}\n        />)\n    // return <Frame frame={frame[0]} />\n  }\n\n\n\n  render(){\n    const videoConstraints = {\n      position: 'absolute',\n      margin: 'auto',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      zIndex: -10,\n      height: 425\n    }\n    return (\n        <>\n        {this.props.number > 0 ?\n            <div className={classes.photobooth_container}>\n              <div id=\"booth-container\"> \n                {this.renderMain()}\n                <div>\n                  {this.renderFrames()}\n                  <div className=\"webcam-container\">\n\n                      <Webcam\n                          style={videoConstraints}\n                          ref={this.setRef}\n                          audio={false}\n                      />\n\n                  </div>\n                </div>\n              </div>\n              <div className={classes.button_div} id=\"button-div\">\n                  <button onClick={this.capture} name=\"photo-button\"></button>\n              </div>\n                {/* <PhotoRender/> */}\n            </div>\n            :\n            <SubmitRender />\n        }\n      </>\n    )\n  }\n}\n\nconst mapStateToProps=(state)=> {\n\tconsole.log(\"state from photo take container\", state);\n\treturn {\t\n    number: state.photoReducer.number_of_remain,\n    frame: state.frameReducer.selected_frame\n\t}\n}\n\n  \nconst mapDispatchToProps = (dispatch) => {\n\tconsole.log('mapDispatchToProps')\n\treturn {\n\t\tphotoCaptured: (imageSrc, frameSrc) => { dispatch(photoCapturedAction(imageSrc, frameSrc))},\n    // resetPhoto: () => { dispatch(resetPhotoAction()) },\n\t\t}\n}\n\nexport default withAuth(connect(mapStateToProps, mapDispatchToProps)(PhotoTake));\n"],"sourceRoot":""}